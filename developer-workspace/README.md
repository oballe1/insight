# Developer Workspace

The Developer is looking to safely provision infrastructure using Terraform without having to worry about managing sensitive AWS credentials locally.

**Developer Vault Login Workflow:**

The login generates the developer token which is validate for certain duration depending how administrator has setup developer role. By default in this sample it is 8hr.

![developer_token](../snapshots/login_using_token.png)




## Inputs

Provided by Administrator:

| Name          | Description                                       | Type     | Required |
| ------------- | ------------------------------------------------- | -------- | -------- |
| vault_address | vault address                                     | `string` | yes      |
| aws_backend   | AWS Secret Engine in vault under path aws backend | `string` | yes      |
| aws_role      | AWS Secret Engine in vault with aws role          | `string` | yes      |

Generated by Developer:

| Name            | Description                                                  | Type     | Required |
| --------------- | ------------------------------------------------------------ | -------- | -------- |
| developer_token | Developer vault token which has permission to request AWS credentials from the AWS backend | `string` | yes      |
| name            | vpc provision Name tag value                                 | `string` | no       |
| ttl             | vpc provision TTL tag value                                  | `string` | no       |

## Usage


Request:


>vault login -address=vault_address developer_token

Response:

Success! You are now authenticated. The token information displayed below
is already stored in the token helper. You do NOT need to run "vault login"
again. Future Vault requests will automatically use this token.

Key                  Value
---                  -----
token                new_token
token_accessor       OPnL6qUX856ICyNGiavYDV...
token_duration       767h43m34s
token_renewable      true
token_policies       ["default" "dev-policy"]
identity_policies    []
policies             ["default" "dev-policy"]
ubuntu@ip-192-168-10-10:~$ vault read aws/creds/dev-role

![developer_token](../snapshots/login_using_token.png)

## Reading role

> vault read -address=vault_address aws/creds/dev-role

Key                Value
---                -----
lease_id           aws/creds/dev-role/UPOlmxv2qLg7w.........
lease_duration     768h
lease_renewable    true
access_key         AKIA4ENOHSDFS4JFGTMH
secret_key         9hjWAXhoV9W+ihCumf0gNlfiSEiLKqQ/Kt........
security_token     <nil>

![secrets_generation](../snapshots/generating_dynamic_secret.png)

## vpc creation 

![ec2_provision](../snapshots/vpc_created.png)

## Author

Managed by [Loveth Oballe](https://github.com/oballe1)

